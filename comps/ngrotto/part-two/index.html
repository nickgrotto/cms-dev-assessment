<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Assessment 2</title>
	
	
	<!-- JQUERY -->
	<script src="//code.jquery.com/jquery-1.8.1.min.js"></script>
	
	
	<link href="css/nix.css" rel="stylesheet" type="text/css" />
	<link href="https://fonts.googleapis.com/css?family=Lato:400,900" rel="stylesheet">
</head>



<body>
	
	
	<script type="text/javascript">
//		var slideData = $.getJSON("https://sv-reqres.now.sh/api/listings/?per_page=10", function(slides) {
//			console.log(slides.data);
//		});
//		var slideData = $.getJSON("https://sv-reqres.now.sh/api/events/?per_page=10", function(slides) {
//			console.log(slides.data);
//		});
//		var slideData = $.getJSON("https://sv-reqres.now.sh/api/offers/?per_page=10", function(slides) {
//			console.log(slides.data);
//		});
	</script>
	
	
	<div class="wrapper">
		<nav>
			<button type="button" name="view-all" data-filter="all">All</button>
			<button type="button" name="view-lisings" data-filter="listings">Listings</button>
			<button type="button" name="view-events" data-filter="events">Events</button>
			<button type="button" name="view-offers" data-filter="offers">Offers</button>
		</nav>
		
		<main>
				<section class="listings">

					<div class="slide percent-fifty">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

					<div class="slide">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

					<div class="slide">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

					<div class="slide">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

					<div class="slide">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

					<div class="slide percent-fifty side-by-side">
						<a href="https://theuselessweb.com/" target="_blank">
							<picture style="background-image: url(https://via.placeholder.com/500x500.jpg)">
								<img src="https://via.placeholder.com/500x500.jpg" alt="placeholder">
							</picture>
						</a>
						<div class="slide-caption">
							<h3>Lorem ipsum dolor sit amet</h3>
							<p>Mauris tincidunt luctus arcu, a maximus urna pharetra a. Ut tempus vitae elit a aliquam. Donec bibendum, mi sit amet mollis placerat, ipsum leo venenatis ipsum, ac faucibus nisl eros vel mauris. Etiam placerat sollicitudin euismod. Proin hendrerit enim ante, et ultrices magna mattis sit amet. Vivamus porta fringilla nisi in bibendum. Aenean accumsan, nulla quis sollicitudin lacinia, est felis iaculis risus, ut molestie eros lacus id nulla. Mauris imperdiet efficitur tellus. Donec id mi eget nulla semper malesuada. Nullam et feugiat velit, id feugiat ex. Nulla et iaculis leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec quis pulvinar est. Ut euismod condimentum nisl, ut semper ante pellentesque a. Donec id justo sit amet lacus sodales dapibus. Etiam ornare faucibus urna sed sollicitudin. Cras a tempor diam. Morbi convallis tortor vel felis bibendum, at porttitor massa lacinia. Integer in sodales nunc. Phasellus erat ipsum, faucibus eget turpis a, tempor accumsan dui.</p>
							<a class="sh-more-link" href="https://theuselessweb.com/" target="_blank">Read More</a>
						</div>
					</div>

				</section>
		</main>
	</div>
	
	
	<script type="text/javascript">

		$('body').on('click','[data-filter]', function() {
			$(".listings").empty();
			
			if ($(this).attr('data-filter') == 'all') {
				var slideCats = new Array("listings", "events", "offers");
				$(slideCats).each(function(i, slideCat){
					$.getJSON("https://sv-reqres.now.sh/api/" + slideCat + "/?per_page=10",
					function(slides){
						$.each(slides.data, function(i, slide){
							getSlide(i, slide);
							$(content).appendTo(".listings");
						});
					});
				});
			} else {
				$.getJSON("https://sv-reqres.now.sh/api/" + $(this).attr('data-filter') + "/?per_page=10",
				function(slides){
					$.each(slides.data, function(i, slide){
						getSlide(i, slide);
						$(content).appendTo(".listings");
					});
				});
			}
			
		});
		
		function getSlide(i, slide) {
			// Open SLIDE div and apply classes
			content = '<div class="slide';
			// This is breaking on show all because it's restarting the count.
				if (i == 0 || i % 6 == 0) {
					content += ' percent-fifty';
				}
				if (i !== 0 && i % 5 == 0) {
					content += ' percent-fifty side-by-side';
				}
			content += '">';
			
			// Build slide content IMAGE
			if (slide.weburl) {
				content += '<a href="' + slide.weburl + '" target="_blank">';
			}
			// Boo I hate the following fallback but
			content += '<picture style="background-image:url('+ slide.mediaurl +'), url(fallback.jpg);">';
			// This did not work and I don't know why
			// try {
			// 	content += '<picture style="background-image:url('+ slide.mediaurl +');">';
			// }
			// catch (e) {
			// 	content += '<picture style="background-image:url(fallback.jpg);">';
			// }
			content += '<img src="' + slide.mediaurl + '" onerror="imgError(this);"/>';
			content += '</picture>'
			if (slide.weburl) {
				content += '</a>';
			}
			// Open slide CAPTION div
			content += '<div class="slide-caption">';
			
			// Build slide content TITLE
			content += ' <h3>' + slide.title + '</h3>';
			
			// Build OTHER slide content
			content += '<p>' + slide.description + '</p>';
			content += '<a class="sh-more-link" href="' + slide.weburl + '" target="_blank">Read More</a>';
			
			// Close SLIDE and CAPTION divs
			content += '</div></div>';
			return content;
		}
		
		function imgError(image) {
			image.onerror = "";
			image.src = "fallback.jpg";
			return true;
		}
		
	</script>
	<script type="text/javascript" src="js/picturefill.min.js"></script>
</body>



</html>